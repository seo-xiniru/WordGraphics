<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WordGraphics</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#7c3aed;--glass:rgba(255,255,255,0.04)}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, 'Noto Sans KR', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background:linear-gradient(180deg,#071024 0%, #071a2a 100%);
      color:#e6eef8;
      display:grid;
      place-items:center;
      padding:24px;
    }
    .card{
      width:min(920px,96vw);
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:16px;
      padding:28px;
      box-shadow:0 8px 30px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.04);
    }
    h1{margin:0 0 12px 0;font-size:18px}
    p.lead{margin:0 0 18px 0;color:#9fb2d8}

    .input-wrap{display:flex;justify-content:center;margin-bottom:18px}
    input[type="text"]{
      width:100%;max-width:720px;padding:16px 18px;border-radius:12px;border:0;background:var(--glass);color:inherit;font-size:18px;outline:3px solid transparent;transition:outline .18s ease, transform .08s ease;backdrop-filter: blur(6px);
    }
    input[type="text"]:focus{outline:3px solid rgba(124,58,237,0.18);transform:translateY(-1px)}

    .emoji-strip{
      min-height:84px;display:flex;flex-wrap:wrap;gap:10px;align-items:center;padding:14px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px dashed rgba(255,255,255,0.02);
    }
    .emoji{
      font-size:30px;padding:8px 12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));box-shadow:0 4px 12px rgba(2,6,23,0.45);display:inline-flex;align-items:center;justify-content:center;min-width:44px;min-height:44px
    }

    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:10px;color:inherit;cursor:pointer}
    button:hover{border-color:rgba(124,58,237,0.28)}

    @media (max-width:520px){
      .emoji{font-size:24px;min-width:40px;min-height:40px}
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>WordGraphics</h1>
    <p class="lead">ë‚˜ì¤‘ì— ì´ëª¨ì§€ë¥¼ ì œì‘í•œ ê·¸ë˜í”½ìœ¼ë¡œ ì‚½ì…í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>

    <div class="input-wrap">
      <input id="typed" type="text" autocomplete="off" autocapitalize="off" placeholder="í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”." />
    </div>

    <div id="emojiStrip" class="emoji-strip" aria-live="polite"></div>

    <div class="controls">
      <button id="clearBtn">ì´ˆê¸°í™”</button>
      <button id="copyBtn">ì´ëª¨ì§€ ë³µì‚¬</button>
    </div>

  </div>

  <script>
    // í‚¤ â†’ ì´ëª¨ì§€ ë§¤í•‘ (ì†Œë¬¸ì ê¸°ì¤€). í•„ìš”í•˜ë©´ ììœ ë¡­ê²Œ ìˆ˜ì •í•˜ì„¸ìš”.
    const KEY_TO_EMOJI = {
      'a':'ğŸ','b':'ğŸ…±ï¸','c':'ğŸŒœ','d':'ğŸ¬','e':'ğŸ¥š','f':'ğŸ','g':'ğŸ¦’','h':'ğŸ ','i':'ğŸ¦','j':'ğŸ•¹ï¸','k':'ğŸ”‘','l':'ğŸ‹','m':'ğŸŒ•','n':'ğŸ¶','o':'ğŸ…¾ï¸','p':'ğŸ…¿ï¸','q':'â“','r':'ğŸŒˆ','s':'â˜€ï¸','t':'ğŸŒ´','u':'â˜‚ï¸','v':'âœ…','w':'ğŸŒŠ','x':'âŒ','y':'ğŸ¸','z':'âš¡',
      '0':'0ï¸âƒ£','1':'1ï¸âƒ£','2':'2ï¸âƒ£','3':'3ï¸âƒ£','4':'4ï¸âƒ£','5':'5ï¸âƒ£','6':'6ï¸âƒ£','7':'7ï¸âƒ£','8':'8ï¸âƒ£','9':'9ï¸âƒ£',
      ' ':'â£','Enter':'â','Tab':'â‡¥','Shift':'â‡§','Control':'âŒƒ','Alt':'â‡','Meta':'ğŸªª','Backspace':'âŒ«',
      ',':',','.' :'.','/':'/','\\':'\\',"'":"'","\"":"\"",'!':'â—','?':'â“',':':':',';':';','-':'â–','=':'â•','+':'â•','*':'âœ³ï¸','(':'(',')':')','[':'[',']':']','{':'{','}':'}','@':'@','#':'#','$':'$','%':'%','^':'^','&':'&'
    };

    const input = document.getElementById('typed');
    const emojiStrip = document.getElementById('emojiStrip');
    const clearBtn = document.getElementById('clearBtn');
    const copyBtn = document.getElementById('copyBtn');

    // í˜„ì¬ ë³´ì—¬ì§€ëŠ” ì´ëª¨ì§€ ëª©ë¡ì„ ë°°ì—´ë¡œ ê´€ë¦¬
    const emojis = [];

    function renderEmojis(){
      emojiStrip.innerHTML = '';
      if(emojis.length === 0){
        const hint = document.createElement('div');
        hint.style.opacity = 0.45;hint.textContent = 'ì•„ì§ ì•„ë¬´ í‚¤ë„ ëˆ„ë¥´ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';emojiStrip.appendChild(hint);return;
      }
      for(const e of emojis){
        const el = document.createElement('div');el.className = 'emoji';el.textContent = e;emojiStrip.appendChild(el);
      }
      // ìŠ¤í¬ë¡¤ì„ ëìœ¼ë¡œ
      emojiStrip.scrollIntoView({behavior:'smooth', block:'nearest'});
    }

    // keydown ì´ë²¤íŠ¸ë¡œ í‚¤ ì…ë ¥ì„ ê°ì§€í•œë‹¤. (Backspace/Enter ë“±ë„ ì¡ì„ ìˆ˜ ìˆìŒ)
    input.addEventListener('keydown', (ev) => {
      const key = ev.key; // ì˜ˆ: 'a', 'Enter', 'Backspace'

      // ì¡°í•© ì¤‘(IME)ì¸ ê²½ìš°(ev.isComposing)ê°€ trueì¼ ìˆ˜ ìˆìœ¼ë‹ˆ ê·¸ë•ŒëŠ” ë¬´ì‹œ
      if(ev.isComposing) return;

      if(key === 'Backspace'){
        // ì…ë ¥ì°½ì˜ ì‹¤ì œ í…ìŠ¤íŠ¸ì™€ ì—°ë™í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì²˜ë¦¬ (ì´ëª¨ì§€ ëª©ë¡ì—ì„œ ë§ˆì§€ë§‰ ì•„ì´í…œ ì œê±°)
        if(emojis.length) emojis.pop();
        // ì‹¤ì œ inputì˜ valueëŠ” ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì§€ì›Œì¤€ë‹¤.
        // render í›„ ê¸°ë³¸ ë™ì‘ ê³„ì† ì‹¤í–‰
        setTimeout(renderEmojis, 0);
        return; // ê¸°ë³¸ ë™ì‘ í—ˆìš©
      }

      // EnterëŠ” ì¤„ë°”ê¿ˆ ëŒ€ì‹  ì´ëª¨ì§€ë¡œ í‘œì‹œ
      if(key === 'Enter'){
        emojis.push(KEY_TO_EMOJI['Enter'] || 'â');
        renderEmojis();
        // allow default to insert newline only if it's a textarea; for input[type=text] prevent default so it doesn't submit forms
        ev.preventDefault();
        return;
      }

      // Tab: í¬ì»¤ìŠ¤ ì´ë™ì„ ë§‰ê³  ì´ëª¨ì§€ë¥¼ ì¶”ê°€í•˜ì
      if(key === 'Tab'){
        emojis.push(KEY_TO_EMOJI['Tab']);
        renderEmojis();
        ev.preventDefault();
        return;
      }

      // Shift, Control ë“± modifierë§Œ ëˆ„ë¥´ë©´ (ì‹¤ì œ ë¬¸ìëŠ” ì…ë ¥ë˜ì§€ ì•ŠìŒ) ì´ëª¨ì§€ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆìŒ
      if(['Shift','Control','Alt','Meta'].includes(key)){
        emojis.push(KEY_TO_EMOJI[key] || key);
        renderEmojis();
        ev.preventDefault();
        return;
      }

      // ë³´í†µì˜ ë¬¸ìí‚¤(ì˜ë¬¸, ìˆ«ì, ê¸°í˜¸ ë“±). ë¸Œë¼ìš°ì €ëŠ” keyì— ì…ë ¥ëœ ë¬¸ìë¥¼ ì¤€ë‹¤.
      const kLower = key.length === 1 ? key.toLowerCase() : key;
      const mapped = KEY_TO_EMOJI[kLower] || KEY_TO_EMOJI[key] || key;
      emojis.push(mapped);
      // renderëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ í•´ë„ ê´œì°®ìŒ
      setTimeout(renderEmojis, 0);
      // ê¸°ë³¸ ë™ì‘ í—ˆìš©(ì…ë ¥ì°½ì— ê¸€ìê°€ ì…ë ¥ë˜ë„ë¡)
    });

    // Clear ë²„íŠ¼
    clearBtn.addEventListener('click', () => {
      emojis.length = 0; input.value = ''; renderEmojis(); input.focus();
    });

    // ë³µì‚¬ ë²„íŠ¼: visible ì´ëª¨ì§€ë“¤ì„ í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ ë³µì‚¬
    copyBtn.addEventListener('click', async () => {
      try{
        const text = emojis.join(' ');
        await navigator.clipboard.writeText(text);
        copyBtn.textContent = 'ë³µì‚¬ë¨!';
        setTimeout(()=>copyBtn.textContent='ì´ëª¨ì§€ ë³µì‚¬',900);
      }catch(e){
        copyBtn.textContent = 'ë³µì‚¬ ì‹¤íŒ¨';
        setTimeout(()=>copyBtn.textContent='ì´ëª¨ì§€ ë³µì‚¬',900);
      }
      input.focus();
    });

    // ì´ˆê¸° ë Œë”
    renderEmojis();

    // í¬ì»¤ìŠ¤ UX: í˜ì´ì§€ í´ë¦­í•˜ë©´ ì…ë ¥ì°½ í¬ì»¤ìŠ¤
    document.body.addEventListener('click', (e)=>{
      if(e.target !== input) input.focus();
    });
  </script>
</body>
</html>